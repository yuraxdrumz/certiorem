{"version":3,"sources":["webpack:///webpack/bootstrap 3183ed1033f5a7b301fb","webpack:///./test.js","webpack:///./index.js","webpack:///./observer.js","webpack:///./observable.js","webpack:///external \"events\""],"names":["main","createObservable","observer","createObserver","subscribe","data","console","log","extend","decorateObservable","Car","wheels","Truck","car","truck","observer2","observer3","emit","name","parent","parentObservable","passListeners","listenersToPass","prototype","listeners","fn","Object","create","__proto__","ObservableClass","passedClassMethods","getOwnPropertyNames","slice","Observabled","forEach","method","Observer","parentEmitter","label","removeListener","defineProperty","enumerable","configurable","writable","value","addListener","bind","args","childNotify","Observable","callback","push","observerName","index","length","i","len","includes","filter","listener"],"mappings":"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","file":"backend.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3183ed1033f5a7b301fb","import { decorateObservable, createObservable, createObserver } from './index'\r\n\r\nlet main = createObservable()\r\nlet observer = createObserver('listener1', main)\r\nobserver.subscribe('go', function(data){console.log(data)})\r\nlet extend = decorateObservable(main, false)\r\n\r\n@extend\r\nclass Car{\r\n  constructor(wheels){\r\n    this.wheels = wheels\r\n  }\r\n  go(){\r\n    console.log('going')\r\n  }\r\n  stop(){\r\n    console.log('stopping')\r\n  }\r\n}\r\n\r\n@extend\r\nclass Truck{\r\n  constructor(wheels){\r\n\r\n  }\r\n}\r\n\r\n\r\n\r\nlet car = new Car(4)\r\nlet truck = new Truck(6)\r\nlet observer2 = createObserver('tr listener', truck)\r\nlet observer3 = createObserver('truck listener', truck)\r\nobserver2.subscribe('go', function(data){console.log(data)})\r\nobserver3.subscribe('go', function(data){console.log(data)})\r\n// car.emit('go', 'car going')\r\ntruck.emit('go', 'truck started driving')\r\n// truck.go()\n\n\n// WEBPACK FOOTER //\n// ./test.js","import Observer from './observer'\r\nimport Observable from './observable'\r\n\r\n// creates a new observable\r\nfunction createObservable(){\r\n  return new Observable()\r\n}\r\n\r\n// creates a new observer\r\nfunction createObserver(name, parent){\r\n  return new Observer(name, parent)\r\n}\r\n\r\n// TODO make tests...\r\n// TODO test decorator and rewrite for better understanding and use cases\r\nfunction decorateObservable(parentObservable, passListeners = false) {\r\n  // if class, then type is func, if instance, type is object\r\n  // if class and parent observable has listeners on it, pass them to child\r\n  let listenersToPass\r\n  if(typeof parentObservable === 'function'){\r\n    listenersToPass = parentObservable.prototype.listeners || {}\r\n  }else if(typeof parentObservable === 'object'){\r\n    listenersToPass = Object.create(parentObservable.listeners)\r\n    function fn(){}\r\n    fn.prototype = parentObservable.__proto__\r\n    parentObservable = fn\r\n  }\r\n  // handle merging prototypes of created class with decorated class and pass listeners from parent if flag === true\r\n  return function(ObservableClass){\r\n    let passedClassMethods = Object.getOwnPropertyNames(ObservableClass.prototype).slice(1)\r\n    class Observabled extends parentObservable{\r\n      constructor(){\r\n        super()\r\n        this.listeners = passListeners ? listenersToPass : {}\r\n      }\r\n    }\r\n    Observabled.prototype.listeners = listenersToPass\r\n    passedClassMethods.forEach(method=>Observabled.prototype[method] = ObservableClass.prototype[method])\r\n    return Observabled\r\n  }\r\n}\r\n\r\nexport { createObservable, createObserver, decorateObservable }\n\n\n// WEBPACK FOOTER //\n// ./index.js","// observer class\r\nexport default class Observer{\r\n  constructor(name, parentEmitter){\r\n    this.name = name\r\n    this.parentEmitter = parentEmitter\r\n  }\r\n  // remove listener on a specific event, this.name is passed an will be compared to fn.name which is set on subscription\r\n  unsubscribe(label){\r\n    this.parentEmitter.removeListener(label, this.name)\r\n  }\r\n  // add a listener on a specific event, add this.name on fn.name\r\n  subscribe(label, fn){\r\n    // TODO check if arrow func and replace for regular func in order to have bind this with name and parent emitter...\r\n    Object.defineProperty(fn,'name',{\r\n      enumerable: false,\r\n      configurable: true,\r\n      writable: true,\r\n      value: this.name\r\n    })\r\n    // bind fn to this\r\n    this.parentEmitter.addListener(label, fn.bind(this))\r\n  }\r\n  // emit change to parent\r\n  emit(label, ...args){\r\n    this.parentEmitter.childNotify(label, ...args)\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./observer.js","import EventEmitter from 'events'\r\n\r\n// observable class\r\nexport default class Observable extends EventEmitter{\r\n  constructor() {\r\n    super()\r\n    // all listeners\r\n    this.listeners = {}\r\n  }\r\n  // adding the event name as key and all listeners as an array value\r\n  addListener(label, callback) {\r\n    if(!this.listeners[label]) this.listeners[label] = []\r\n    this.listeners[label].push(callback)\r\n  }\r\n  // remove listener by observer name, when adding a listener, fn.name is added the observer name for easier removal\r\n  removeListener(label, observerName){\r\n    let listeners = this.listeners\r\n    let index = null\r\n    if(listeners[label] && listeners[label].length){\r\n      for(let i = 0, len = listeners[label].length; i < len; i++){\r\n        if(listeners[label][i].name.includes(observerName)){\r\n          index = i\r\n          break\r\n        }\r\n      }\r\n      if(index !== null){\r\n        listeners[label] = listeners[label].filter(fn => fn !== listeners[label][index])\r\n      }\r\n    }\r\n  }\r\n  // emit to all observers subscribed to specific event, call all fns and pass args to them\r\n  emit(label, ...args){\r\n    let listeners = this.listeners[label]\r\n    if (listeners && listeners.length) {\r\n      listeners.forEach(listener => listener(...args))\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n  // when a listener emits a change, notify all children\r\n  childNotify(label, ...args){\r\n    // same as emit but fired from child to notify parent that notifies all children\r\n    return this.emit(label, ...args)\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./observable.js","module.exports = require(\"events\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"events\"\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}