{"version":3,"sources":["webpack:///webpack/bootstrap f9ab57de73c583530f62","webpack:///./test.js"],"names":["Emit","listeners","emit","label","args","length","forEach","listener","AddListener","addListener","callback","push","RemoveListener","removeListener","observerName","index","i","len","name","includes","filter","fn","ChildNotify","AttachListeners","Unsubscribe","parent","unsubscribe","Subscribe","subscribe","Object","defineProperty","enumerable","configurable","writable","value","bind","createObservable","assign","createObserver","makeObservable","attachListeners","Class","prototype","makeObserver","main","observer","observer2","console","log","data","Test","t","observer3","Obs","obs"],"mappings":"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","file":"backend.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f9ab57de73c583530f62","\r\n\r\nconst Emit = ({listeners}) =>({\r\n  emit:(label, ...args)=>{\r\n    listeners = listeners[label]\r\n    if (listeners && listeners.length) {\r\n      listeners.forEach(listener => listener(...args))\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n})\r\n\r\nconst AddListener = ({listeners}) =>({\r\n  addListener:(label, callback)=>{\r\n    if(!listeners[label]) listeners[label] = []\r\n    listeners[label].push(callback)\r\n  }\r\n\r\n})\r\n\r\nconst RemoveListener = ({listeners}) =>({\r\n  removeListener:(label, observerName)=>{\r\n    let index = null\r\n    if(listeners[label] && listeners[label].length){\r\n      for(let i = 0, len = listeners[label].length; i < len; i++){\r\n        if(listeners[label][i].name.includes(observerName)){\r\n          index = i\r\n          break\r\n        }\r\n      }\r\n      if(index !== null){\r\n        listeners[label] = listeners[label].filter(fn => fn !== listeners[label][index])\r\n      }\r\n    }\r\n  }\r\n\r\n})\r\n\r\nconst ChildNotify = ({emit}) =>({\r\n  emit:(label, ...args)=>{\r\n    // same as emit but fired from child to notify parent that notifies all children\r\n    return emit(label, ...args)\r\n  }\r\n})\r\n\r\nconst AttachListeners = ({listeners}) => ({\r\n  listeners:listeners || {}\r\n})\r\n\r\nconst Unsubscribe = ({parent, name}) =>({\r\n  unsubscribe: label =>{\r\n    parent.removeListener(label, name)\r\n  }\r\n})\r\n\r\nconst Subscribe = ({parent, name}) =>({\r\n  subscribe:(label, fn)=>{\r\n    Object.defineProperty(fn,'name',{\r\n      enumerable: false,\r\n      configurable: true,\r\n      writable: true,\r\n      value: name\r\n    })\r\n    parent.addListener(label, fn.bind(this))\r\n  }\r\n})\r\n\r\nfunction createObservable (parent = null) {\r\n  let listeners = parent ? parent.listeners : {}\r\n  return Object.assign({},\r\n    Emit({listeners}),\r\n    AddListener({listeners}),\r\n    RemoveListener({listeners}),\r\n    AttachListeners({listeners})\r\n  )\r\n}\r\n\r\nfunction createObserver(name, parent){\r\n  return Object.assign({},\r\n    ChildNotify(Emit({listeners:parent.listeners})),\r\n    Subscribe({parent, name}),\r\n    Unsubscribe({parent, name})\r\n  )\r\n}\r\n\r\nfunction makeObservable(parent, attachListeners = true){\r\n  return function(Class){\r\n    Object.assign(Class.prototype, createObservable(attachListeners?parent:null))\r\n    return Class\r\n  }\r\n}\r\n\r\nfunction makeObserver(name, parent){\r\n  return function(Class){\r\n    Object.assign(Class.prototype, createObserver(name, parent))\r\n    return Class\r\n  }\r\n}\r\n\r\n\r\nlet main = createObservable()\r\nlet observer = createObserver('observer1', main)\r\nlet observer2 = createObserver('observer2', main)\r\nobserver.subscribe('start',data=>console.log(data))\r\nobserver2.subscribe('start',data=>console.log(data))\r\n// observer.unsubscribe('start')\r\n// main.emit('start', 'awsomeeeee')\r\n// observer.emit('start', 'started in observer')\r\n\r\n@makeObservable(main)\r\nclass Test{\r\n  constructor(){\r\n\r\n  }\r\n}\r\n\r\nlet t = new Test()\r\n\r\nlet observer3 = createObserver('d', t)\r\nobserver3.subscribe('start',data=>console.log(data))\r\nmain.emit('start', 'started in main')\r\n@makeObserver('dsasd', t)\r\nclass Obs{\r\n  constructor(){\r\n\r\n  }\r\n}\r\nlet obs = new Obs()\r\nobs.subscribe('start',()=>console.log(`comes from obssss`))\r\nt.emit('start', 'started in decorated class')\r\n\n\n\n// WEBPACK FOOTER //\n// ./test.js"],"sourceRoot":""}